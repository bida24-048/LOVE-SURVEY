<!DOCTYPE html>
<html>
<head>
  <title>ðŸ’ž Promises</title>
</head>
<body>
<h1>ðŸ’ž Daily Promise</h1>
<textarea id="promiseText" rows="4" cols="40" placeholder="Write your promise..."></textarea><br>
<button onclick="savePromise()">Save ðŸ’Œ</button>
<p id="status"></p>
<h2>My Promises ðŸ’–</h2>
<ul id="promiseList"></ul>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
const promiseListEl = document.getElementById("promiseList");

// --- Firebase Config ---
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// --- Load local promises ---
function loadLocalPromises() {
  const promises = JSON.parse(localStorage.getItem("promises")) || [];
  promiseListEl.innerHTML = "";
  promises.forEach(p => {
    const li = document.createElement("li");
    li.textContent = `ðŸ“… ${p.date} - ${p.text}`;
    promiseListEl.appendChild(li);
  });
}

// --- Save promise ---
function savePromise() {
  const text = document.getElementById("promiseText").value.trim();
  if(!text) return alert("Please enter a promise!");

  const data = { text, date: new Date().toLocaleString() };

  // Save locally
  let promises = JSON.parse(localStorage.getItem("promises")) || [];
  promises.push(data);
  localStorage.setItem("promises", JSON.stringify(promises));

  // Save to shared vault
  db.ref("vault").push({ type: "promise", ...data });

  document.getElementById("promiseText").value = "";
  document.getElementById("status").innerText = "Promise saved locally & shared ðŸ’–";
  loadLocalPromises();
}

// Initialize
loadLocalPromises();
</script>
</body>
</html>
