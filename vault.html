<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ðŸ“– Our Love Vault</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #fff0f5; }
  h1 { color: #d63384; }
  h2 { color: #b82d7a; }
  ul { list-style: none; padding: 0; }
  li { margin: 5px 0; }
  button { padding: 5px 10px; margin: 5px; cursor: pointer; }
  input, textarea { padding: 5px; margin: 5px; width: 200px; }
</style>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body>
<h1>ðŸ“– Our Love Vault</h1>

<div id="vault">Loading vault... ðŸ˜˜</div>


<script>
// ---- Firebase Config ----
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT_ID.firebaseio.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
firebase.initializeApp(firebaseConfig);
const database = firebase.database();

// ---- Login check ----
if (localStorage.getItem("loveLogin") !== "true") {
  window.location.href = "index.html";
}

// ---- Load Vault ----
function loadVault() {
  const vaultDiv = document.getElementById("vault");
  const sections = ["promises", "songs", "plans", "messages", "surveys"];
  vaultDiv.innerHTML = "Loading vault... ðŸ˜˜";

  let vaultHTML = "";
  let loadedSections = 0;

  sections.forEach(sec => {
    firebase.database().ref(sec).once("value").then(snapshot => {
      const items = snapshot.val() || [];
      if (items.length > 0) {
        vaultHTML += `<h2>${sec.toUpperCase()} ðŸ’–</h2><ul>`;
        items.forEach(i => {
          vaultHTML += `<li>${i.date}: ${i.text || i.title + " - " + i.note}</li>`;
        });
        vaultHTML += "</ul>";
      }
      loadedSections++;
      if (loadedSections === sections.length) {
        vaultDiv.innerHTML = vaultHTML || "No entries yet ðŸ˜˜";
      }
    });
  });
}

// ---- Add Survey ----
function addSurvey() {
  const text = document.getElementById("surveyText").value.trim();
  if (!text) return alert("Please enter something!");
  const data = { date: new Date().toLocaleString(), text };
  const ref = firebase.database().ref("surveys");
  ref.once("value").then(snapshot => {
    const items = snapshot.val() || [];
    items.push(data);
    ref.set(items);
    document.getElementById("surveyText").value = "";
    loadVault(); // refresh vault
  });
}

// ---- Initial load ----
loadVault();
</script>
</body>
</html>



