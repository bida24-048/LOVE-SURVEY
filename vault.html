<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ðŸ’Œ Our Vault</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #fff0f5; padding: 20px; }
    h1 { color: #d63384; }
    h2 { color: #a60073; margin-top: 20px; }
    input, textarea { margin: 8px; padding: 8px; border-radius: 8px; border: 1px solid #ccc; }
    button { margin: 5px; padding: 10px 15px; border: none; border-radius: 12px; background: #ff4da6; color: white; cursor: pointer; }
    button:hover { background: #d63384; }
    ul { list-style: none; padding: 0; }
    li { margin: 5px 0; padding: 10px; background: #ffe6f0; border-radius: 10px; }
  </style>
</head>
<body>

  <h1>ðŸ’Œ Our Vault</h1>
  
  <!-- Add Song -->
  <h2>ðŸŽµ Add Song</h2>
  <input type="text" id="songTitle" placeholder="Song title"><br>
  <textarea id="songNote" rows="2" cols="30" placeholder="Why this song?"></textarea><br>
  <button onclick="saveSong()">Add Song ðŸ’–</button>
  
  <!-- Add Message -->
  <h2>ðŸ’¬ Add Message</h2>
  <textarea id="messageText" rows="2" cols="30" placeholder="Type a message..."></textarea><br>
  <button onclick="saveMessage()">Save Message âœ¨</button>

  <!-- Add Plan -->
  <h2>ðŸ“… Add Plan</h2>
  <input type="text" id="planText" placeholder="Our plan"><br>
  <button onclick="savePlan()">Save Plan ðŸŒ¸</button>

  <h2>ðŸ“– Vault History</h2>
  <ul id="vaultList"></ul>

  <!-- Share button -->
  <button onclick="shareVault()">ðŸ“¤ Share Vault to WhatsApp</button>

  <script>
  // Load from localStorage
  function loadVault() {
    const vault = JSON.parse(localStorage.getItem("vault")) || [];
    const list = document.getElementById("vaultList");
    list.innerHTML = "";
    vault.forEach(item => {
      const li = document.createElement("li");
      if (item.type === "song") {
        li.textContent = `ðŸŽµ ${item.date} - ${item.title} : ${item.note}`;
      } else if (item.type === "message") {
        li.textContent = `ðŸ’¬ ${item.date} - ${item.text}`;
      } else if (item.type === "plan") {
        li.textContent = `ðŸ“… ${item.date} - ${item.text}`;
      }
      list.appendChild(li);
    });
  }

  // Save Song
  function saveSong() {
    const title = document.getElementById("songTitle").value.trim();
    const note = document.getElementById("songNote").value.trim();
    if (!title || !note) return alert("Please enter song and note!");
    addToVault({ type: "song", title, note, date: new Date().toLocaleDateString() });
    document.getElementById("songTitle").value = "";
    document.getElementById("songNote").value = "";
  }

  // Save Message
  function saveMessage() {
    const text = document.getElementById("messageText").value.trim();
    if (!text) return alert("Please enter a message!");
    addToVault({ type: "message", text, date: new Date().toLocaleDateString() });
    document.getElementById("messageText").value = "";
  }

  // Save Plan
  function savePlan() {
    const text = document.getElementById("planText").value.trim();
    if (!text) return alert("Please enter a plan!");
    addToVault({ type: "plan", text, date: new Date().toLocaleDateString() });
    document.getElementById("planText").value = "";
  }

  // Add to Vault
  function addToVault(entry) {
    const vault = JSON.parse(localStorage.getItem("vault")) || [];
    vault.push(entry);
    localStorage.setItem("vault", JSON.stringify(vault));
    loadVault();
  }

  // Share to WhatsApp
  function shareVault() {
    const vault = JSON.parse(localStorage.getItem("vault")) || [];
    if (vault.length === 0) return alert("Nothing to share today!");
    const today = new Date().toLocaleDateString();
    const todayEntries = vault.filter(item => item.date === today);
    if (todayEntries.length === 0) return alert("No entries for today!");
    let message = `âœ¨ Vault History for ${today} âœ¨\n\n`;
    todayEntries.forEach(item => {
      if (item.type === "song") message += `ðŸŽµ ${item.title}: ${item.note}\n`;
      if (item.type === "message") message += `ðŸ’¬ ${item.text}\n`;
      if (item.type === "plan") message += `ðŸ“… ${item.text}\n`;
    });
    const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
    window.open(url, "_blank");
  }

  // Notifications
  if ("Notification" in window && Notification.permission !== "granted") {
    Notification.requestPermission();
  }

  function showReminder(title, body) {
    if (Notification.permission === "granted") {
      new Notification(title, { body: body, icon: "https://cdn-icons-png.flaticon.com/512/893/893292.png" });
    }
  }

  // 8PM Reminder
  setInterval(() => {
    let now = new Date();
    if (now.getHours() === 20 && now.getMinutes() === 0) {
      showReminder("ðŸ’Œ Vault Reminder", "Donâ€™t forget to share something on the Vault today âœ¨");
    }
  }, 60000);

  // Midnight Reminder
  setInterval(() => {
    let now = new Date();
    if (now.getHours() === 0 && now.getMinutes() === 0) {
      showReminder("ðŸ“¤ Vault History", "âœ¨ Time to share todayâ€™s Vault on WhatsApp ðŸ’–");
    }
  }, 60000);

  // Initialize
  loadVault();
  </script>

</body>
</html>
