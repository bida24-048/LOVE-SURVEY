<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>📖 Shared Love Vault</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #fff0f5; }
  h1 { color: #d63384; }
  h2 { color: #b82d7a; margin: 20px 0; }
  p { margin: 5px 0; }
  button { 
    margin: 10px; padding: 10px 20px; 
    background: #25D366; color: white; border: none; border-radius: 8px; 
    font-size: 16px; cursor: pointer;
  }
</style>
</head>
<body>

<h1>📖 Shared Love Vault</h1>

<h2>Vault 💖</h2>
<div id="vault">Loading vault...</div>
<button onclick="shareVault()">Share Vault on WhatsApp 📲</button>

<script>
// Load vault
function loadVault() {
  const vault = JSON.parse(localStorage.getItem("vault")) || [];
  const vaultDiv = document.getElementById("vault");
  if(vault.length === 0){
    vaultDiv.innerText = "Vault is empty 😘";
    return;
  }
  let html = "";
  vault.forEach(item => {
    html += `📅 ${item.date} - ${item.type.toUpperCase()}: ${item.text} 💖<br>`;
  });
  vaultDiv.innerHTML = html;
}
loadVault();

// Share via WhatsApp
function shareVault() {
  const vault = JSON.parse(localStorage.getItem("vault")) || [];
  if(vault.length === 0) return alert("Vault is empty 😘");

  let text = "📖💖 Shared Love Vault 💖📖\n\n";
  vault.forEach(item => {
    text += `📅 ${item.date} - ${item.type.toUpperCase()}: ${item.text} 💖\n`;
  });

  // Open WhatsApp web, user chooses contact
  const whatsappUrl = "https://wa.me/?text=" + encodeURIComponent(text);
  window.open(whatsappUrl, "_blank");
}

// --- Notifications ---
function showReminder(){
  if(Notification.permission === "granted"){
    new Notification("💌 Love Vault Reminder", {
      body: "Don't forget to add a message, plan, or promise today! 💖",
      icon: ""
    });
  }
}

// Request permission for notifications
if("Notification" in window){
  Notification.requestPermission();
}

// Schedule notifications at 10 AM and 8 PM
function scheduleReminders(){
  const now = new Date();
  const times = [10, 20]; // 10 AM and 8 PM
  times.forEach(hour => {
    let notifTime = new Date();
    notifTime.setHours(hour,0,0,0);
    let delay = notifTime - now;
    if(delay < 0) delay += 24*60*60*1000; // next day if passed
    setTimeout(function(){
      showReminder();
      setInterval(showReminder, 24*60*60*1000); // repeat daily
    }, delay);
  });
}
scheduleReminders();
</script>

<p style="text-align:center; color:#d63384; margin-top:30px; font-weight:bold;">
❤️ CREATED WITH PURE LOVE ❤️ — I LOVE YOU SO MUCH 💖
</p>

</body>
</html>

