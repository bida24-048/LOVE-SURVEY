  <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ğŸ“– Love Vault</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #fff0f5; margin:0; padding:20px; }
  h1 { color: #d63384; margin-top: 20px; }
  h2 { color: #b82d7a; margin: 20px 0; }
  p { margin: 5px 0; }
  button { margin: 5px; padding: 10px 20px; background: #25D366; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; }
  #vault { margin-top:20px; max-height:400px; overflow-y:auto; border:1px solid #d63384; padding:10px; border-radius:8px; background:#ffe6f0; }
  .vault-entry { margin-bottom: 10px; padding: 8px; border-bottom: 1px solid #d63384; border-radius: 5px; background: #fff0f5; text-align:left; }
  .action-btn { font-size: 14px; margin-top:5px; padding:6px 10px; border-radius:5px; border:none; cursor:pointer; }
  .share-btn { background: #128C7E; color:white; }
  .delete-btn { background: #d63333; color:white; }
  .link-btn { background:#6f42c1; color:white; }
  .row { display:flex; justify-content:center; gap:8px; flex-wrap:wrap; }
</style>
</head>
<body>

<h1>ğŸ“– Love Vault</h1>

<div class="row">
  <button onclick="shareVault()">Share Whole Vault on WhatsApp ğŸ“²</button>
  <button onclick="clearVault()" style="background:#d63333;">Clear Entire Vault âŒ</button>
</div>

<h2>Vault ğŸ’–</h2>
<div id="vault">Loading vault...</div>

<script>
// ---- Load Vault ----
function loadVault() {
  const vault = JSON.parse(localStorage.getItem("vault")) || [];
  const vaultDiv = document.getElementById("vault");
  if (vault.length === 0) {
    vaultDiv.innerText = "Vault is empty ğŸ˜˜";
    return;
  }

  vaultDiv.innerHTML = "";
  vault.forEach((item, index) => {
    const entryDiv = document.createElement("div");
    entryDiv.className = "vault-entry";

    const isSong = item.type === "song";
    const title = isSong ? (item.songTitle || item.title) : null;
    const link  = isSong ? (item.songLink  || item.link)  : null;
    const desc  = isSong ? (item.songDesc  || item.note)  : null;

    let content = "";
    if (isSong) {
      content = `ğŸ“… ${item.date || ""} â€” ğŸµ <b>${escapeHTML(title)}</b><br>
                 ğŸ’– ${escapeHTML(desc || "")}<br>
                 ğŸ”— <a href="${escapeURL(link)}" target="_blank">Play Song</a>`;
    } else if (item.question && (item.answer !== undefined)) {
      content = `ğŸ“… ${item.date || ""} â€” ${item.type?.toUpperCase() || "QUESTION"}: ${escapeHTML(item.question)} â†’ ${escapeHTML(item.answer)} ğŸ’–`;
    } else if (item.text) {
      content = `ğŸ“… ${item.date || ""} â€” ${item.type?.toUpperCase() || "ENTRY"}: ${escapeHTML(item.text)} ğŸ’–`;
    }

    entryDiv.innerHTML = content + `<br>
      <button class="action-btn share-btn" onclick="shareSingle(${index})">Share ğŸ“²</button>
      <button class="action-btn delete-btn" onclick="deleteEntry(${index})">Delete âŒ</button>`;
    vaultDiv.appendChild(entryDiv);
  });

  vaultDiv.scrollTop = vaultDiv.scrollHeight;
}

// ---- Share whole vault ----
function shareVault() {
  const vault = JSON.parse(localStorage.getItem("vault")) || [];
  if (vault.length === 0) return alert("Vault is empty ğŸ˜˜");

  let text = "ğŸ“–ğŸ’– Love Vault ğŸ’–ğŸ“–\n\n";
  vault.forEach(item => {
    if (item.type === "song") {
      const t = item.songTitle || item.title || "Untitled";
      const l = item.songLink  || item.link  || "";
      const d = item.songDesc  || item.note  || "";
      text += `ğŸµ ${t}\nğŸ’– ${d}\nğŸ”— ${l}\n${item.date || ""}\n\n`;
    } else if (item.question && (item.answer !== undefined)) {
      text += `â“ ${item.question} â†’ ${item.answer} ğŸ’– (${item.date || ""})\n`;
    } else if (item.text) {
      text += `${(item.type || "entry").toUpperCase()}: ${item.text} ğŸ’– (${item.date || ""})\n`;
    }
  });

  window.open("https://wa.me/?text=" + encodeURIComponent(text), "_blank");
}

// ---- Share single entry ----
function shareSingle(index) {
  const vault = JSON.parse(localStorage.getItem("vault")) || [];
  if (!vault[index]) return;
  const item = vault[index];

  let text = "ğŸ“–ğŸ’– Love Vault Entry ğŸ’–ğŸ“–\n\n";
  if (item.type === "song") {
    const t = item.songTitle || item.title || "Untitled";
    const l = item.songLink  || item.link  || "";
    const d = item.songDesc  || item.note  || "";
    text += `ğŸµ ${t}\nğŸ’– ${d}\nğŸ”— ${l}`;
  } else if (item.question && (item.answer !== undefined)) {
    text += `â“ ${item.question} â†’ ${item.answer} ğŸ’–`;
  } else if (item.text) {
    text += `${(item.type || "entry").toUpperCase()}: ${item.text} ğŸ’–`;
  }

  window.open("https://wa.me/?text=" + encodeURIComponent(text), "_blank");
}

// ---- Delete entry ----
function deleteEntry(index) {
  const vault = JSON.parse(localStorage.getItem("vault")) || [];
  if (!vault[index]) return;
  if (confirm("Delete this entry? ğŸ’”")) {
    vault.splice(index, 1);
    localStorage.setItem("vault", JSON.stringify(vault));
    loadVault();
  }
}

// ---- Clear entire vault ----
function clearVault() {
  if (confirm("Delete all vault entries? ğŸ’”")) {
    localStorage.removeItem("vault");
    loadVault();
  }
}

// ---- Helpers ----
function escapeHTML(str="") {
  return String(str)
    .replaceAll("&","&amp;").replaceAll("<","&lt;")
    .replaceAll(">","&gt;").replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}
function escapeURL(u="") {
  try { return new URL(u).toString(); } catch { return "#"; }
}

// ---- Init ----
loadVault();
</script>

<p style="text-align:center; color:#d63384; margin-top:30px; font-weight:bold;">
â¤ï¸ I LOVE YOU SO MUCH ğŸ’–
</p>

</body>
</html>
