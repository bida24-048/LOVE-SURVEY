<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>📖 Our Love Vault</title>
<style>
  body { font-family: Arial, sans-serif; text-align: center; background: #fff0f5; }
  h1 { color: #d63384; }
  h2 { color: #b82d7a; margin: 20px 0; }
  ul { list-style: none; padding: 0; }
  li { margin: 5px 0; }
  button { 
    margin: 15px; padding: 10px 20px; 
    background: #25D366; color: white; border: none; border-radius: 8px; 
    font-size: 16px; cursor: pointer;
  }
</style>
</head>
<body>

<h1>📖 Our Love Vault</h1>
<div id="vault">Loading vault... 😘</div>
<button onclick="shareVault()">Share Vault on WhatsApp 📲</button>

<script>
const vaultDiv = document.getElementById("vault");
const sections = ["messages", "plans", "promises", "loveVault"]; // loveVault = surveys

function loadVault() {
  let html = "";
  let hasEntries = false;

  sections.forEach(sec => {
    const items = JSON.parse(localStorage.getItem(sec)) || [];
    if (items.length > 0) {
      hasEntries = true;
      html += `<h2>${sec.toUpperCase()} 💖</h2><ul>`;
      items.forEach(item => {
        if (item.text) html += `<li>📅 ${item.date} - ${item.text}</li>`;
        else if (item.question) html += `<li>📅 ${item.date} - ❓ ${item.question}<br>💌 Answer: ${item.answer}</li>`;
        else if (item.title) html += `<li>📅 ${item.date} - ${item.title}${item.note ? " - " + item.note : ""}</li>`;
      });
      html += "</ul>";
    }
  });

  vaultDiv.innerHTML = hasEntries ? html : "No entries yet 😘";
}

// --- Share vault via WhatsApp ---
function shareVault() {
  const contact = prompt("Enter WhatsApp number including country code (e.g. 2677xxxxxxx):");
  if (!contact) return;

  let text = "📖💖 My Love Vault Today 💖📖\n\n";
  sections.forEach(sec => {
    const items = JSON.parse(localStorage.getItem(sec)) || [];
    if (items.length > 0) {
      text += `📂 ${sec.toUpperCase()} 💖\n`;
      items.forEach(item => {
        if (item.text) text += `📅 ${item.date} - ${item.text}\n`;
        else if (item.question) text += `📅 ${item.date} - ❓ ${item.question}\n💌 Answer: ${item.answer}\n`;
        else if (item.title) text += `📅 ${item.date} - ${item.title}${item.note ? " - " + item.note : ""}\n`;
      });
      text += "\n";
    }
  });

  if (text.trim() === "📖💖 My Love Vault Today 💖📖") {
    alert("Vault is empty! 😘");
    return;
  }

  const whatsappUrl = "https://wa.me/" + contact + "?text=" + encodeURIComponent(text);
  window.open(whatsappUrl, "_blank");
}

// Load vault on page open
loadVault();
setInterval(loadVault, 5000);
</script>

</body>
</html>






